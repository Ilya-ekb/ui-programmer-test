# UI Programmer Test – Review & Notes

> **Коротко:** проект соответствует ТЗ, архитектура (adapter/VM/controllers/views, тесты). Ниже — рекомендации к улучшению, описание тестов. Пометки `TODO:` оставлены осознанно — я в курсе, где можно сделать лучше, и приоритезировал core-логику под дедлайн.

## Стек и версия
- Unity **2022.3 LTS**.
- Canvas UI (по требованию задачи).
- TextMeshPro (встроено),
- UniTask (для ожидания операций).
- TriInspector (маст хев фришный аналог Odin Inspector, для удобного конфига инспектора)

## Архитектура (высокоуровнево)
- `GameModel` — дано по ТЗ, неизменяемо; периодический `Update` вызывается адаптером.
- `GameModelAdapter` — тонкий слой для событий/ожидания операций, изолирует UI от статического API.
- **Providers/VM** — Currency/Consumable, упрощают передачу данных во View.
- **Controllers** — связывают модель/VM и View, инкапсулируют валидацию/бизнес‑логику UI.
- **Views (Canvas)** — визуальный слой, модальные окна, валидация ввода, ошибки.
- **UIManager** — модальность, блокировка фона, обработка Esc по-быстрому (понятно что тут хотя бы FSM нужна)

Преимущества: слабая связность, тестируемость, точка эволюции (Adapter), читаемость.  
Ограничения: присутствует статический доступ к модели (упрощает тест, но сложнее мокать без обёртки DI).

## Тесты
- **EditMode:** проверка провайдеров/адаптера, корректности результатов операций, негативные кейсы (недостаточно монет, нулевой ввод и т.п.).
- **PlayMode (UnityTest):** загрузка сцены, поиск UI‑элементов, клик кнопок, проверка модальности, отображения ошибок/блокировок.

Запуск: `Window → General → Test Runner`, отдельно для EditMode и PlayMode.


## Рекомендации по архитектуре
- Текущий **Adapter + VM + Controller + View** — удачное разделение для теста.
- Для продакшена:
  - Вынести статический `GameModel` за интерфейс `IGameModel` и внедрять его через простой `ServiceLocator`/`DI`.
  - Единый **UI State Machine** (открытие/закрытие окон) — сейчас делает `UIManager`, можно оформить как enum state + transition guards.
  - Локализация: ресурсный слой (`.json`/ScriptableObject) и ключи в коде (`Loc.Get("currency.notEnough")`). Сейчас оставлено как `TODO:` — **я в курсе**, что можно лучше, но не расширял ради краткости тестового.
  - Лёгкая анимация окон (scale/alpha 150–200мс) — повысит UX, оставлено как `TODO:`.


## TODO осознанно оставлены
- `Localization`: минимальный стаб, в проде — ресурсные файлы + fallback + pluralization.
- `Cancellation/Timeout` операций обмена — имитация задержки/ошибок и UI‑сигналы.
- Доп. негативные UnityTests: эмуляция закрытия окна `Esc`, повторное открытие после ошибки, поведение при блокировке кнопки.
- DI для модели — разворачивается быстро, но опущено, чтобы не раздувать тестовое.

